I"ä3<p>Kali ini kita (kita .. lu aja kali) maksudnya saya, kali ini saya akan membuat sebuah layanan email service dengan menggunakan library dari phpmailer dan codeigniter, ok langsung saja kita eksekusi.
buat sebuah controller untuk view nya kita simpan di direktori Controller, save dengan nama <em>EmailService.php</em>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
class EmailService extends CI_Controller {
	
	public function index()
	{
		
		$service = new stdClass();
		$service-&gt;id = null;
		$service-&gt;nama = null;
		$service-&gt;email = null;
		$service-&gt;subject = null;
		$service-&gt;pesan = null;
		
		$data = [
					'service' =&gt; $service //mengambil dari data $unit diatas
		];
		$data['title'] = "OURCITRUS | Admin";
		
		$data['row'] = $this-&gt;admin_m-&gt;get();
		
		$data['subject'] = $this-&gt;db-&gt;get('unit')-&gt;result();
		
		if ($this-&gt;form_validation-&gt;run() == FALSE)
                {
                        $this-&gt;view-&gt;load('email_service', $data);
                }
                else
                {
                        $this-&gt;load-&gt;view('formsuccess');
                }
		
	}
	
}
</code></pre></div></div>

<p>kemudian buat lagi file baru untuk templating nya di direktori view, email_service.php , berhubung kita akan membuat multiple file attachment jadi di bagian form input di field bagian name fieldnya kita beri nama <code class="language-plaintext highlighter-rouge">name=attachment[]</code> dengan tambahan array.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&lt;div class="jumbotron" style="background-color:#000000;"&gt;
  &lt;h1 class="display-4 text-center text-white"&gt;OURCITRUS &lt;br/&gt; Email Service&lt;/h1&gt;
  &lt;p class="lead text-center text-white"&gt;Selamat Datang Dihalaman mail service &lt;br/&gt; OURCITRUS | PT. GEMILANG CITRUS BERJAYA&lt;/p&gt;
  &lt;div class="container"&gt;
	&lt;/div&gt;
  &lt;hr class="my-4 text-white" style="color:#ffffff;"&gt;
  &lt;p class="lead text-center"&gt;
    &lt;a class="btn btn-success btn-md" href="https://ourcitrus.id/product" role="button"&gt;ourcitrus website&lt;/a&gt;
	&lt;a href="/#ForToday|Future" data-toggle="popover" data-html="true" title="Detail Service" class="btn btn-danger" data-content='Dear Member ourcitrus &lt;br&gt; saat ini anda dapat Menggunakan layanan email service untuk melakukan Request order via email yang bisa anda pilih di kolom input pada bagian list subject &lt;span class="red-pop"&gt;Email Order&lt;/span&gt; untuk order via email, Komplain/permasalahan login dan service lainnya mengenai kemitraan anda di ourcitrus bisa pilih list subject &lt;span class="red-pop"&gt;Customer Service&lt;/span&gt;, untuk revisi order bisa pilih &lt;span class="red-pop"&gt;Email Revisi&lt;/span&gt;. &lt;br/&gt;&lt;br/&gt; Salam Gemilang. &lt;br&gt; ourcitrus | For Today And Future'&gt;Read Me Please&lt;/a&gt;

  &lt;/p&gt;
&lt;/div&gt;

&lt;div class="container"&gt;
&lt;div class="mx-auto"&gt;

&lt;?php $this-&gt;view('message.php'); ?&gt;

&lt;?= form_open_multipart('MailSend') ?&gt; &lt;!-- controller MailSend --&gt;

&lt;div class="col-sm-8"&gt;
  &lt;div class="form-group"&gt;
    &lt;label for="name"&gt;Nama Lengkap&lt;/label&gt;
    &lt;input type="text" class="demoInputBox form-control" id="name" name="userName" 
	placeholder="Nama Lengkap Anda" required&gt;
  &lt;/div&gt;
  &lt;/div&gt;
  
&lt;div class="col-sm-8"&gt;
  &lt;div class="form-group"&gt;
    &lt;label for="email"&gt;Alamat Email&lt;/label&gt;
    &lt;input type="email"  class="demoInputBox form-control" id="email" name="userEmail" placeholder="email_anda@email.com" required&gt;
  &lt;/div&gt;
  &lt;/div&gt;
  
  &lt;div class="col-sm-8"&gt;
  &lt;div class="form-group"&gt;
    &lt;label for="subject"&gt;Subject Email&lt;/label&gt;
	&lt;select required id="subject" name="subject"  class="demoInputBox form-control"&gt;
	&lt;option value="- pilih -"&gt;- Pilih -&lt;/option&gt;
	&lt;?php foreach($subject as $row):?&gt;
	&lt;option value="&lt;?=$row-&gt;name?&gt;"&gt;&lt;?=$row-&gt;name?&gt;&lt;/option&gt;
	&lt;?php endforeach;?&gt;
	&lt;/select&gt;  
	&lt;/div&gt;
  &lt;/div&gt;
  
  &lt;div class="col-sm-8"&gt;
				&lt;div class="form-group"&gt;
                     &lt;label for="image"&gt;Attachment &lt;/label&gt;
            &lt;input type="file" name="attachment[]" class="demoInputBox form-control" multiple&gt;&lt;br/&gt;
                 &lt;/div&gt;
  &lt;/div&gt;
  
&lt;div class="col-sm-8"&gt;
  &lt;div class="form-group"&gt;
    &lt;label for="pesan"&gt;Isi Pesan&lt;/label&gt;
    &lt;textarea name="content" class="demoInputBox ckeditor form-control" id="pesan" rows="3" cols="5" required&gt; &lt;/textarea&gt;
  &lt;/div&gt;
  &lt;/div&gt;
  
&lt;div class="col-sm-8"&gt;
  &lt;div class="form-group"&gt;
	&lt;button type="submit" name="add" class="btn btn-primary"&gt;Send Now&lt;/button&gt;
	&lt;/div&gt;
	&lt;/div&gt;
&lt;?= form_close() ?&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;br/&gt;&lt;br/&gt;
</code></pre></div></div>

<p>lanjut lagi buat controller baru yang berfungsi sebagai action nya di direktori controller beri nama MailSend.php</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
require_once(APPPATH. 'libraries/phpmailer/PHPMailerAutoload.php');
class MailSend extends CI_Controller {
	private $emailSend = "youremail@your.hosting";
	public function index()
	{
		if(isset($_POST['add'])){
		
			$mail = new PHPMailer();
			$post=$this-&gt;input-&gt;post(null, TRUE);
				$mail-&gt;IsSMTP();
				$mail-&gt;SMTPDebug = 0;
				$mail-&gt;SMTPAuth = TRUE;
				$mail-&gt;SMTPSecure = "tls";
				$mail-&gt;Port     = 587;  
				$mail-&gt;Username = "username@gmail.com";
				$mail-&gt;Password = "password_login";
				$mail-&gt;Host     = "smtp.googlemail.com";
				$mail-&gt;Mailer   = "smtp";
				
				$mail-&gt;SetFrom($this-&gt;emailSend, htmlspecialchars(strtolower(str_replace(" ","", $_POST["userName"]))));
				$mail-&gt;AddAddress($_POST['userEmail']);
				$mail-&gt;AddReplyTo($_POST["userEmail"], htmlspecialchars(strtolower(str_replace(" ","", $_POST["userName"]))));
					
				$mail-&gt;Subject = htmlspecialchars($post["subject"]);
				$mail-&gt;WordWrap   = 80;
				$mail-&gt;MsgHTML($post["content"]);
				foreach ($_FILES["attachment"]["name"] as $k =&gt; $v) {
					$mail-&gt;AddAttachment( $_FILES["attachment"]["tmp_name"][$k], $_FILES["attachment"]["name"][$k] );
				}

				$mail-&gt;IsHTML(true);

				if(!$mail-&gt;Send()) {
					$this-&gt;session-&gt;set_flashdata('error', 'Gagal Mengirim Email!');
					redirect('MailSend/err_page?id=err');
				} else {
				$this-&gt;session-&gt;set_flashdata('success', 'Data Berhasil disimpan ke database ourcitrus');
				echo "&lt;script&gt;
					alert('Hai ".$post['userName']."\\nTerima kasih sudah menghubungi kami \\nEmail Anda : ".$post['userEmail']."\\nkami telah merespon email anda dan akan segera diproses oleh management kami \\nby ourcitrus team.');
					window.location.href='MailSend/success_page?id=success';
					&lt;/script&gt;";
					
					
        			}
 				
							 
		}
        
}
	
	public function success_page()
	{
		$data['title'] = "Success Page";
	
		$this-&gt;load-&gt;view('success_page', $data);
	}
	
	public function err_page()
	{
		$data['title'] = "error Page";
		
		$this-&gt;load-&gt;view('err_page', $data);

	}
	
}
</code></pre></div></div>

<p>ini untuk halaman tambahan simpan di direktori view dengan success_page.php dan err_page.php</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="jumbotron"&gt;
  &lt;h1 class="display-4 text-center"&gt;OURCITRUS &lt;br/&gt; Email Service&lt;/h1&gt;
  &lt;p class="lead text-center"&gt;Selamat Datang Dihalaman mail service &lt;br/&gt; OURCITRUS | PT. GEMILANG CITRUS BERJAYA&lt;/p&gt;
  &lt;div class="container"&gt;
	&lt;/div&gt;
  &lt;hr class="my-4"&gt;
  &lt;p class="lead text-center"&gt;
    &lt;a class="btn btn-success btn-md" href="https://ourcitrus.id/product" role="button"&gt;ourcitrus website&lt;/a&gt;
  &lt;/p&gt;
&lt;/div&gt;


&lt;b&gt;&lt;?php if(isset($filenames)) echo "Successfully uploaded ".count($filenames)." files"; ?&gt;&lt;/b&gt;
    
&lt;div class="container"&gt;
  &lt;div class="row"&gt;
  &lt;?php if($_GET['id'] == "success"):?&gt;
    &lt;?php $this-&gt;view('message.php'); ?&gt;
  &lt;div class="alert alert-warning alert-dismissible fade show" role="alert"&gt;
  &lt;strong&gt;Dear Member&lt;/strong&gt; Terima kasih sudah menghubungi kami, selanjutnya pesan anda akan segera di proses oleh team management kami.
  &lt;button type="button" class="close" data-dismiss="alert" aria-label="Close"&gt;
    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
  &lt;/button&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	
	&lt;div class="row"&gt;
  &lt;div class="col-sm-6"&gt;
    &lt;div class="card"&gt;
      &lt;div class="card-body"&gt;
        &lt;h5 class="card-title"&gt;OURCITRUS Website&lt;/h5&gt;
        &lt;p class="card-text"&gt;Anda sudah melakukan proses kirim pesan melalui aplikasi mail service kami, untuk kembali ke halaman utama, silahkan klik tombol dibawah.&lt;/p&gt;
        &lt;a href="https://ourcitrus.id/" class="btn btn-primary"&gt;Go ourcitrus.id&lt;/a&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  
  &lt;?php endif;?&gt;
  
  &lt;div class="col-sm-6"&gt;
    &lt;div class="card"&gt;
      &lt;div class="card-body"&gt;
        &lt;h5 class="card-title"&gt;Kembali Ke Halaman Mail Service&lt;/h5&gt;
        &lt;p class="card-text"&gt;Untuk kembali ke halaman mail service silahkan klik tombol di bawah.&lt;/p&gt;
        &lt;a href="&lt;?=base_url()?&gt;EmailService" class="btn btn-primary"&gt;Back To Message&lt;/a&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

	
&lt;/div&gt;
&lt;br/&gt;&lt;br/&gt;
</code></pre></div></div>
<p>kemudian buat file err_page.php</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php if($_GET['id'] == "err"):?&gt;
&lt;?php $this-&gt;view('message.php'); ?&gt;
&lt;?php endif;?&gt;
</code></pre></div></div>

<p>masih di direktori view buat file baru dengan nama message.php</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php if($this-&gt;session-&gt;has_userdata('success')):?&gt;
       &lt;div class="alert alert-success alert-dismissible"&gt;
                &lt;button type="button" class="close" data-dismiss="alert" aria-hidden="true"&gt;Ã—&lt;/button&gt;
                &lt;h4&gt;&lt;i class="icon fa fa-check"&gt;&lt;/i&gt; &lt;?= $this-&gt;session-&gt;flashdata('success'); ?&gt;&lt;/h4&gt;
              &lt;/div&gt;

 &lt;?php elseif($this-&gt;session-&gt;has_userdata('del')): ?&gt;
 	       &lt;div class="alert alert-success alert-dismissible"&gt;
                &lt;button type="button" class="close" data-dismiss="alert" aria-hidden="true"&gt;Ã—&lt;/button&gt;
                &lt;h4&gt;&lt;i class="icon fa fa-check"&gt;&lt;/i&gt; &lt;?= $this-&gt;session-&gt;flashdata('del'); ?&gt;&lt;/h4&gt;
              &lt;/div&gt;
 &lt;?php elseif($this-&gt;session-&gt;has_userdata('wrong')):?&gt;
 		       &lt;div class="alert alert-danger alert-dismissible"&gt;
                &lt;button type="button" class="close" data-dismiss="alert" aria-hidden="true"&gt;Ã—&lt;/button&gt;
                &lt;h4&gt;&lt;i class="icon fa fa-ban"&gt;&lt;/i&gt;  &lt;?= $this-&gt;session-&gt;flashdata('wrong'); ?&gt;&lt;/h4&gt;
              &lt;/div&gt;
&lt;?php elseif($this-&gt;session-&gt;has_userdata('error')):?&gt;
           &lt;div class="alert alert-danger alert-dismissible"&gt;
                &lt;button type="button" class="close" data-dismiss="alert" aria-hidden="true"&gt;Ã—&lt;/button&gt;
                &lt;h4&gt;&lt;i class="icon fa fa-ban"&gt;&lt;/i&gt;  
                  &lt;?= strip_tags(str_replace('&lt;/p&gt;', '', $this-&gt;session-&gt;flashdata('error'))); ?&gt;
                &lt;/h4&gt;
              &lt;/div&gt;
&lt;?php elseif($this-&gt;session-&gt;has_userdata('empty-subject')):?&gt;
 		       &lt;div class="alert alert-danger alert-dismissible"&gt;
                &lt;button type="button" class="close" data-dismiss="alert" aria-hidden="true"&gt;Ã—&lt;/button&gt;
                &lt;h4&gt;&lt;i class="icon fa fa-ban"&gt;&lt;/i&gt;  &lt;?= $this-&gt;session-&gt;flashdata('empty-subject'); ?&gt;&lt;/h4&gt;
              &lt;/div&gt;
&lt;?php elseif($this-&gt;session-&gt;has_userdata('statusMsg')):?&gt;
 		       &lt;div class="alert alert-danger alert-dismissible"&gt;
                &lt;button type="button" class="close" data-dismiss="alert" aria-hidden="true"&gt;Ã—&lt;/button&gt;
                &lt;h4&gt;&lt;i class="icon fa fa-ban"&gt;&lt;/i&gt;  &lt;?= $this-&gt;session-&gt;flashdata('empty-subject'); ?&gt;&lt;/h4&gt;
              &lt;/div&gt;
			  
 &lt;?php endif; ?&gt;
</code></pre></div></div>
<p>untuk kekurangannya bisa dilihat di repository di bawah ini 
 <a href="https://github.com/codesyariah122/phpmailer_ourcitrus">PhpMailer</a></p>

<p>ok sekian dulu dari saya.</p>

:ET