I"@d<h3 id="apa-itu-graphql">Apa itu graphQL</h3>
<p>GraphQL adalah sebuah konsep baru dalam  membangun api. GraphQL (Query Language) yang di develop oleh <code class="language-html highlighter-rouge">facebook</code>.<br />
di implementasikan pada sisi server. Meskipun sebuah query language graphQL ini tidak secara langsung berhubungan dengan database server, dengan kata lain GraphQL ini tidak terbatas untuk database tertentu di platform tertentu, baik itu <code class="language-html highlighter-rouge">SQL</code> ataupun <code class="language-html highlighter-rouge">noSQL</code>.<br />
posisi GraphQL ini berada di sisi client dan server yang berhubungan / mengakses suatu API. Salah satu tujuan pengembangan bahasa query ini adalah untuk memudahkan komunikasi data antara beckend dan frontend / mobile aplikasi.</p>

<p><img src="https://codesyariah122.github.io/assets/images/post/graphql-post.png" alt="graphQL" /></p>

<p>GraphQL ini dapat di implementasikan di segala sisi client seperti :</p>
<ul>
  <li>react</li>
  <li>vue</li>
  <li>meteor</li>
  <li>dll</li>
</ul>

<p>karena graphQL ini hanya penerjemah (query language) dan runtime saja, maka tidak bergantung pada bahasa pemrogramman sisi server dan database apapun, bisa cek link berikut : <a href="https://graphql.org/code/">GraphQL</a></p>

<h3 id="selanjutnya-">selanjutnya …</h3>
<p>Dalam artikel kali ini ! gout masih menggunakan framework gatsbyJS dari react, masih meraba-raba di tengah kebutaan.<br />
mungkin di artikel kali ini gout hanya sedikit merekam dokumentasi dalam pembuatan single page posts di gatsbyJS.<br />
pertama gout mengelola query di graphql gatsbyJS.</p>

<p>buka user interface graphql <code class="language-html highlighter-rouge">localhost:8000/___graphql</code> 
sebelum melakukan testing query untuk binding data di gatsby, kita mau ubah view user interface dari graphql nya dulu untuk menambah user experience dalam mengelola gatsby graphql ini dengan tampilan <code class="language-html highlighter-rouge">playground</code> :</p>

<p><strong><em>stop service gatsbyny terlebih dahulu <code class="language-html highlighter-rouge">ctrl+c</code></em></strong> kemudian install packagenya :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="syntax"><code>npm <span class="nb">install</span> <span class="nt">--save-dev</span> cross-env env-cmd
</code></pre></div></div>
<p>kemudian tambahkan package yang tadi di install, ke file <code class="language-html highlighter-rouge">package.json</code> di direktori root</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="nl">"develop"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gatsby develop"</span><span class="w">  

</span></code></pre></div></div>
<p>tambahkan package instance berikut :</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="s2">"GATSBY_GRAPHQL_IDE=playground"</span><span class="w"> 
</span></code></pre></div></div>

<p>kemudian buat file baru dengan properti hidden di root direktori dengan nama</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="syntax"><code>.env.development 
</code></pre></div></div>

<p>kemudian tambahkan baris script berikut</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="nv">GATSBY_GRAPHQL_IDE</span><span class="o">=</span>playground 
</code></pre></div></div>

<p>jalankan kembali server gatsbyJS nya</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="syntax"><code>npm run develop 
</code></pre></div></div>

<p>kemudian buka kembali user interface graphql di link : <code class="language-html highlighter-rouge">localhost:8000/___graphql</code><br />
seperti inilah tampilan graphql dengan package user interface playground:</p>

<p><img src="https://codesyariah122.github.io/assets/images/post/graphql-ui-gatsby.png" alt="graphQL" /></p>

<p>lakukan query diataranya untuk binding data dan melakukan slug untuk data di page posts nanti yang akan kita buat di bagian selanjutnya : 
gout melakukan beberapa query sepert dibawah ini, tambahkan query di box sebelah kiti :</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="c1">// query untuk metadata</span>
<span class="nx">query</span><span class="p">{</span>
  <span class="nx">site</span><span class="p">{</span>
    <span class="nx">siteMetadata</span> <span class="p">{</span>
      <span class="nx">title</span>
      <span class="nx">author</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>


<span class="c1">//query buat markdown</span>
<span class="nx">query</span><span class="p">{</span>
  <span class="nx">allFile</span><span class="p">{</span>
    <span class="nx">edges</span> <span class="p">{</span>
      <span class="nx">node</span> <span class="p">{</span>
        <span class="nx">name</span>
        <span class="nx">extension</span>
        <span class="nx">dir</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// get slug post page </span>
<span class="nx">query</span><span class="p">{</span>
  <span class="nx">allMarkdownRemark</span> <span class="p">{</span>
    <span class="nx">edges</span><span class="p">{</span>
      <span class="nx">node</span> <span class="p">{</span>
        <span class="nx">fields</span> <span class="p">{</span>
          <span class="nx">slug</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// get single slug posts tamplate</span>

<span class="nx">query</span> <span class="p">(</span>
  <span class="nx">$slug</span><span class="p">:</span> <span class="nb">String</span><span class="o">!</span>
<span class="p">){</span>
  <span class="nx">markdownRemark</span> <span class="p">(</span>
    <span class="nx">fields</span><span class="p">:</span> <span class="p">{</span>
      <span class="nl">slug</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">eq</span><span class="p">:</span> <span class="nx">$slug</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">){</span>
    <span class="nx">frontmatter</span> <span class="p">{</span>
      <span class="nx">title</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>kalian bisa telah sendiri hasil dari query graphQL diatas, untuk slug dan binding data. kalian coba telaah secara lebih spesifik. seperti ini contohnya :</p>

<p><img src="https://codesyariah122.github.io/assets/images/post/graphql2.png" alt="graphQL" /><br />
query diatas untuk binding metadata untuk di query di bagian page. kalian bisa coba baris perbaris atau buka perbaris dari script graphql diatas di tab baru di user interfacenya graphql.</p>

<h4 id="kemudian-selanjutnya-lagi-">kemudian selanjutnya lagi !</h4>
<p>selanjutnya ….. mulailah untuk membaca dokumentasinya, karena dalam artikel kali ini gout mau binding data di page gatsby untuk menyajikan fitur blog dengan gatsby.</p>
<ul>
  <li>
    <p>binding data untuk posts list di page blog
ini mengurutkan list post yang kita create di direktori root untuk posts kita. pertama kita buat dulu satu direktori baru di direktori <code class="language-html highlighter-rouge">src/</code> dengan nama <code class="language-html highlighter-rouge">posts/</code>, tambahkan beberapa file sebagai example post 
misalnya gout buat file <code class="language-html highlighter-rouge">first-post.md</code> format penulisan post dengan markdown. setelah itu kita buka lagi direktori <code class="language-html highlighter-rouge">pages</code> masih di direktori view utama gatsbyJS yaitu <code class="language-html highlighter-rouge">src</code>.</p>

    <ul>
      <li>buka file <code class="language-html highlighter-rouge">blog.js</code>
tambahkan baris code berikut :
        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="syntax"><code>    <span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

    <span class="k">import</span> <span class="p">{</span> <span class="nx">graphql</span><span class="p">,</span> <span class="nx">useStaticQuery</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gatsby</span><span class="dl">'</span>

    <span class="k">import</span> <span class="p">{</span> <span class="nx">Link</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gatsby</span><span class="dl">'</span>

    <span class="k">import</span> <span class="nx">Layout</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../components/layout</span><span class="dl">'</span>



    <span class="kd">const</span> <span class="nx">BlogPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

      <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">useStaticQuery</span><span class="p">(</span><span class="nx">graphql</span><span class="s2">`
        query {
          allMarkdownRemark {
            edges {
              node {
                frontmatter {
                  title
                  date
                }
                fields {
                  slug
                }
              }
            }
          }
        }
        `</span><span class="p">)</span>

      <span class="c1">//console.log(data);</span>

      <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">Layout</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">My</span> <span class="nx">Blog</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">ol</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">allMarkdownRemark</span><span class="p">.</span><span class="nx">edges</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">edge</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="k">return</span> <span class="p">(</span>
                <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="p">{</span><span class="s2">`/blog/</span><span class="p">${</span><span class="nx">edge</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">slug</span><span class="p">}</span><span class="s2">`</span><span class="p">}</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">edge</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">frontmatter</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>                  <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">edge</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">frontmatter</span><span class="p">.</span><span class="nx">date</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>                  <span class="o">&lt;</span><span class="sr">/Link</span><span class="err">&gt;
</span>                <span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>                <span class="p">)</span>
              <span class="p">})}</span>
          <span class="o">&lt;</span><span class="sr">/ol</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/Layout</span><span class="err">&gt;
</span>        <span class="p">)</span>
    <span class="p">}</span>
    <span class="k">export</span> <span class="k">default</span> <span class="nx">BlogPage</span>
</code></pre></div>        </div>
        <p>file tersebut akan menampilkan daftar baris post di link <code class="language-html highlighter-rouge">/blog/</code> seperti dibawah ini :</p>

        <p><img src="https://codesyariah122.github.io/assets/images/post/post-list-gatsby.png" alt="graphQL" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>binding data untuk single posts page
selanjutnya, setelah edit page <code class="language-html highlighter-rouge">blog.js</code> kita kembali ke direktori root gatsby kita, kemudian buat satu file baru di root direktori, beri nama <code class="language-html highlighter-rouge">gatsby-node.js</code> .<br />
seperti ini :</p>

    <p><img src="https://codesyariah122.github.io/assets/images/post/gatsby-direktori-1.png" alt="graphQL" /></p>

    <p>kemudian buka file <code class="language-html highlighter-rouge">gatsby-node.js</code> copy baris code berikut :</p>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="syntax"><code>    <span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">)</span>

    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">onCreateNode</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">actions</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="p">{</span> <span class="nx">createNodeField</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">actions</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">internal</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">MarkdownRemark</span><span class="dl">'</span><span class="p">){</span>
        <span class="kd">const</span> <span class="nx">slug</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">basename</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">fileAbsolutePath</span><span class="p">,</span> <span class="dl">'</span><span class="s1">.md</span><span class="dl">'</span><span class="p">);</span>

        <span class="nx">createNodeField</span><span class="p">({</span>
          <span class="nx">node</span><span class="p">,</span>
          <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">slug</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">value</span><span class="p">:</span> <span class="nx">slug</span>
        <span class="p">})</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">createPages</span> <span class="o">=</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">graphql</span><span class="p">,</span> <span class="nx">actions</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>

      <span class="kd">const</span> <span class="p">{</span> <span class="nx">createPage</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">actions</span>
      <span class="kd">const</span> <span class="nx">blogTemplate</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">'</span><span class="s1">./src/templates/blog.js</span><span class="dl">'</span><span class="p">)</span>
      <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">graphql</span><span class="p">(</span><span class="dl">'</span><span class="s1">
          query{
            allMarkdownRemark {
              edges {
                node {
                  fields {
                    slug
                  }
                }
              }
            }
          }
        </span><span class="dl">'</span><span class="p">)</span>

      <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">allMarkdownRemark</span><span class="p">.</span><span class="nx">edges</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">edge</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">createPage</span><span class="p">({</span>
          <span class="na">component</span><span class="p">:</span> <span class="nx">blogTemplate</span><span class="p">,</span>
          <span class="na">path</span><span class="p">:</span> <span class="s2">`/blog/</span><span class="p">${</span><span class="nx">edge</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">slug</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
          <span class="na">context</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">slug</span><span class="p">:</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">slug</span>
          <span class="p">}</span>
        <span class="p">})</span>
      <span class="p">})</span>


    <span class="p">}</span>
</code></pre></div>    </div>
    <p>dibagian file tersebut kita melakukan import module-module dan beberapa dependencies dari nodeJS.</p>
  </li>
  <li>
    <p>selanjutnya create post page<br />
untuk menampilkan post kita di gatsby kita buat satu direktori baru di direktori <code class="language-html highlighter-rouge">src</code> beri nama <code class="language-html highlighter-rouge">templates</code>, kemudian buat file baru di direktori <code class="language-html highlighter-rouge">templates</code> beri nama <code class="language-html highlighter-rouge">blog.js</code>. page ini nanti yang akan menampilkan single page untuk post kita. kemudian buka file <code class="language-html highlighter-rouge">templates/blog.js</code> copy baris code berikut :</p>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="syntax"><code>    <span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

    <span class="k">import</span> <span class="nx">Layout</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../components/layout</span><span class="dl">'</span>

    <span class="k">export</span> <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">graphql</span><span class="s2">`query ($slug: String!){
          markdownRemark (fields: {slug: { eq: $slug } }){
            frontmatter {
              title
              date
            }
            html
        }
      }
    `</span>

    <span class="kd">const</span> <span class="nx">Blog</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span>

          <span class="o">&lt;</span><span class="nx">Layout</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">markdownRemark</span><span class="p">.</span><span class="nx">frontmatter</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">small</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">markdownRemark</span><span class="p">.</span><span class="nx">frontmatter</span><span class="p">.</span><span class="nx">date</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/small</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">dangerouslySetInnerHTML</span><span class="o">=&gt;&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/Layout</span><span class="err">&gt;
</span>
        <span class="p">)</span>
    <span class="p">}</span>

    <span class="k">export</span> <span class="k">default</span> <span class="nx">Blog</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>kemudian setup dibagian <code class="language-html highlighter-rouge">gatsby-config.js</code>
buka kembali file <code class="language-html highlighter-rouge">gatsby-config.js</code> di direktori root applikasi gatsbyJS kita :<br />
kemudian ubah baris script nya menjadi sepert dibawah ini :</p>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="syntax"><code>    <span class="c1">// module.exports = {</span>
    <span class="c1">//   /* Your site config here */</span>
    <span class="c1">//   plugins: [],</span>
    <span class="c1">// }</span>

    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">siteMetadata</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Full-Stack Developer</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">author</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Puji Ermanto</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
          <span class="dl">'</span><span class="s1">gatsby-plugin-sass</span><span class="dl">'</span><span class="p">,</span>
          <span class="dl">'</span><span class="s1">react-router-dom</span><span class="dl">'</span><span class="p">,</span>
          <span class="p">{</span>
            <span class="na">resolve</span><span class="p">:</span> <span class="dl">"</span><span class="s2">gatsby-source-filesystem</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">src</span><span class="dl">'</span><span class="p">,</span>
              <span class="na">path</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">__dirname</span><span class="p">}</span><span class="s2">/src/`</span>
            <span class="p">}</span>
          <span class="p">},</span>
         
          <span class="dl">'</span><span class="s1">gatsby-transformer-remark</span><span class="dl">'</span>
          <span class="p">]</span>
      <span class="p">}</span>
</code></pre></div>    </div>
    <p>kita telah menambahkan beberapa configurasi untuk metadata dan path direktori untuk page. dalam artikel ini tujuannya untuk menyajikan post kita dalam sebuah halaman (page). baik itu untuk order list posts dan single page posts nya.<br />
agan-agan bisa lihat demo link nya di link berikut : 
<a href="https://pujermanto.netlify.app/blog/" target="_blank">Blog</a></p>
  </li>
</ul>

<p><strong><em>untuk bagian <code class="language-html highlighter-rouge">gatsby-config.js</code> silahkan disesuaikan dengan yang agan-agan buat</em></strong>. akhir kata gout ucapkan terima kasih telah berkunjung dan membaca artikel ini dan tak lupa gout doakan semoga agan-agan semua selalu diberi nikmat sehat dan nikmat waktu luang. akhir kata ……</p>

<p>waasalamm….</p>

<p><strong><em>puji ermanto</em></strong></p>

:ET