I"¹'<h3 id="fitur-live-search-dengan-ajax-jquery">Fitur live search dengan ajax jquery</h3>

<p><img src="http://localhost:4000/assets/images/post/live_search.png" alt="live_search_ajax" /></p>

<p>halo coders semuanya â€¦.<br />
ini masih melanjutkan edisi crud data dengan ajax jquery dengan menggunakan metode php pdo ekstension sebagai sql universal interfacenya.  dalam artikel kali ini gout mau menerapkan sebuah fitur live search ala-ala google atau live search lain dimedia atau aplikasi berbasis web maupun mobile lainnya, masih dengan php disisi beckend nya. apa daya cuma itu yang baru gout bisa.<br />
ok tan[p]a berlama lama kita langsung ajah ke codingan nya :</p>

<p><strong><em>menyambung dari artikel crud data ajax jquery, di artikel sebelumnya</em></strong></p>

<p><a href="https://github.com/codesyariah122/crud-data-with-php-PDO-Jquery-ajax/tree/master/assets" title="Crud data sederhana dengan ajax jquery">Crud data ajax jquery</a></p>

<p>dari code-code sebelumnya gout hanya menambahkan satu fungsi baru sebagai sebuah metode untuk menjalankan program live search.<br />
didalam file function.php, tambahkan fungsi baru di baris paling bawah, kemudian copy code dibawah ini:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function searchData($keyword){
	$query = "SELECT * FROM `product` WHERE 
				`product_code` LIKE '%$keyword%' OR
				`product_name` LIKE '%$keyword%' OR
				`product_price` LIKE '%$keyword%'
				ORDER BY `id` DESC
	";
	return view($query);
}
</code></pre></div></div>
<p>dari fungsi diatas terdapat baris code berikut :  <code class="language-plaintext highlighter-rouge">return view()</code> code ini adalah fungsi callback yang merupakan bagian reusable program dari aplikasi cruddata sederhana ini, atau bahasa manusianya memanggil fungsi dari sebuah fungsi yang sebelumnya sudah dibuat, karena di code sebelumnya di dalam file <code class="language-plaintext highlighter-rouge">functions.php</code> tersebut terdapat fungsi <code class="language-plaintext highlighter-rouge">view</code> yakni sebuah fungsi untuk melakukan query (mengambil data) dari database untuk disajikan ke view frontend.</p>

<p><strong><em>selanjutnya â€¦</em></strong></p>

<p>berikutnya kita buka file <code class="language-plaintext highlighter-rouge">view.php</code> di direktori <code class="language-plaintext highlighter-rouge">contents/</code> : kemudian ubah semua baris code tersebut menjadi seperti ini :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;style&gt;
  .loader{
    width:150px;
    position:absolute;
    top:-2rem;
    margin-left: -2rem;
    z-index:-1;
    display:none;
  }
  &lt;/style&gt;

&lt;h1 class="text-primary text-center mt-4 pt-4"&gt;Product Table&lt;/h1&gt;
    
    &lt;div class="form-group"&gt;
      &lt;div class="row"&gt;
        &lt;div class="col-xs-12"&gt;
          &lt;input type="text" class="form-control" id="keyword" name="keyword" placeholder="Type keywords to search the product ... " autocomplete="off"&gt;
        &lt;/div&gt;
        &lt;div class="col-md-4"&gt;
          &lt;img src="assets/img/animated.gif" class="loader"&gt;
        &lt;/div&gt;  
      &lt;/div&gt;
    &lt;/div&gt;

&lt;table class="table table-hover"&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th scope="col"&gt;#&lt;/th&gt;
      &lt;th scope="col"&gt;Product Code&lt;/th&gt;
      &lt;th scope="col"&gt;Product Name&lt;/th&gt;
      &lt;th scope="col"&gt;Product Price&lt;/th&gt;
      &lt;th scope="col"&gt;Operation Table&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody id="product-data"&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;script type="text/javascript"&gt;
  
  $('#product-data').load('contents/product_data.php').fadeIn(1000);

&lt;/script&gt;

</code></pre></div></div>
<p>dari code diatas saya ubah semua struktur content viewnya, untuk memodularisasikan data request dari frontend ke database server. dalam file <code class="language-plaintext highlighter-rouge">view.php</code> tersebut seluruh data di table data dibagian <code class="language-plaintext highlighter-rouge">&lt;tbody&gt;&lt;/tbody&gt;</code> saya pindahkan ke file lain â€˜masih di direktori yang sama direktori contents/â€™ yaitu file <code class="language-plaintext highlighter-rouge">product_data.php</code> kemudian <code class="language-plaintext highlighter-rouge">&lt;tbody&gt;</code> nya saya jadikan selector untuk jquery sebagai reverse data dari file <code class="language-plaintext highlighter-rouge">product_data.php</code> dibagian akhir file <code class="language-plaintext highlighter-rouge">view.php</code> terdapat tag <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> baru, script tersebut fungsinya untuk meload data difile <code class="language-plaintext highlighter-rouge">product_data.php</code> dengan kata lain ini menggantikan fungsi require ataupun include, supaya codingan kita tertata lebih rapi dan mudah untuk di maintenance di lain waktu. fungsi file view ini hanya sebagai reverse dari file product_data.php. di file view.php ini kita tambahkan sebuah inputan baru untuk mengirim input dari keyword yang di ketikan oleh client disisi frontend.</p>

<p><strong><em>kemudian â€¦</em></strong></p>

<p>difile lainya yakni file <code class="language-plaintext highlighter-rouge">product_data.php</code> jika belum ada buat file baru di direktori yang sama dengan file view.php yaitu direktori contents/, buat file baru dengan nama <code class="language-plaintext highlighter-rouge">product_data.php</code> kemudian copy code berikut :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php  
require_once '../functions.php';
if(@$_GET['keyword'] == @$_POST['keyword']):
    if(searchData(@$_POST['keyword'])):
      usleep(700000);
      $viewData = searchData(@$_POST['keyword']);
    endif;
endif;
?&gt;


&lt;?php if(empty($viewData)): ?&gt;
  &lt;tr&gt;
    &lt;td colspan="3"&gt;No data on this table product&lt;/td&gt;
  &lt;/tr&gt;
&lt;?php endif; ?&gt;

 &lt;?php $no=1; foreach($viewData as $view): ?&gt;
    &lt;tr&gt;
      &lt;th scope="row"&gt;&lt;?=$no?&gt;&lt;/th&gt;
      &lt;td&gt;&lt;?=$view['product_code']?&gt;&lt;/td&gt;
      &lt;td&gt;&lt;?=$view['product_name']?&gt;&lt;/td&gt;
      &lt;td&gt;&lt;?=$view['product_price']?&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;button id="&lt;?=$view['id']?&gt;" class="edit btn btn-danger btn-sm"&gt;&lt;i class='fas fa-edit'&gt;&lt;/i&gt;&lt;/button&gt;
        &lt;button id="&lt;?=$view['id']?&gt;" class="del btn btn-info btn-sm"&gt;&lt;i class='fas fa-eraser'&gt;&lt;/i&gt;&lt;/button&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
&lt;?php $no++; endforeach; ?&gt;
</code></pre></div></div>
<p>dari file diatas inilah setiap data yang direquest akan ditampung, diambil nilainya yang berupa method <code class="language-plaintext highlighter-rouge">@$_GET</code> dan <code class="language-plaintext highlighter-rouge">@$_POST</code>, setiap data yang direquest di tampung ke dalam sebuah variable global php, dan kemudian bisa disimpan kedalam variabel baru, dan variabel baru ini diberinama <code class="language-plaintext highlighter-rouge">$viewData</code> yakni variabel yang berisi sebuah fungsi yakni fungsi baru yang dibuat di file <code class="language-plaintext highlighter-rouge">functions.php</code> yaitu fungsi <code class="language-plaintext highlighter-rouge">searchData()</code> dan fungsi searchData sendiri memiliki nilai parameter, kemudian nilai parameternya itu kita isi dari sebuah input di file <code class="language-plaintext highlighter-rouge">view.php</code> yaitu dibagian ini :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;input type="text" class="form-control" id="keyword" name="keyword" placeholder="Type keywords to search the product ... " autocomplete="off"&gt;
</code></pre></div></div>
<p>input tersebut akan mengirim data menggunakan sebuah method dalam program ini yaitu method <code class="language-plaintext highlighter-rouge">post</code> sedangkan method <code class="language-plaintext highlighter-rouge">get</code> digunakan ketika data ditangani oleh ajax dalam parameter fungsi nya. 
jadi setiap inputan tersebut akan dikelola terlebih dahulu oleh ajax di file javascript, sebelum dikirim ke server di sisi beckend. dan seperti inilah fungsi ajax yang menangani setiap request data dari inputan tersebut :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$('#viewdata').on('keyup', '#keyword', function(){
	$('.loader').show();
	//variable untuk menampung nilai input dari keyword
	const keyword = $('#keyword').val();

	$.ajax({
		url: 'contents/product_data.php?keyword='+keyword,
		type: 'post',
		data: 'keyword='+keyword,
		success: function(response){
			if(response){
				$('.loader').hide('slow').fadeOut(1000);
				$('#product-data').html(response);
			}else{
				Swal.fire("Data no found");
			}
		}
	});
});
</code></pre></div></div>

<p>dari file tersebutlah inputan dari keyword akan dikelola dan dikirim keserver dalam sebuah parameter global variable php yaitu</p>
<ol>
  <li><code class="language-plaintext highlighter-rouge">@$_GET</code> -&gt; untuk menangani request url</li>
  <li><code class="language-plaintext highlighter-rouge">@$_POST</code> -&gt; untuk mengirim data yang berasal dari input keyword.</li>
</ol>

<p><img src="http://localhost:4000/assets/images/post/crud_ajax_live_search.gif" alt="live_search_ajax" /></p>

<p>keseluruhan struktur direktori dan source code bisa disimak dan diteliti lebih lanjut pada link berikut :<br />
<a href="https://github.com/codesyariah122/crud-data-with-php-PDO-Jquery-ajax/tree/master/assets" title="Crud data sederhana dengan ajax jquery">Crud data ajax jquery</a></p>

<p><strong><em>akhir kata â€¦</em></strong> 
semoga bisa bermanfaat, sampai bertemu diartikel selanjutnya dan selanjutnyaâ€¦
salam</p>

<p>puji ermanto / webdeveloper ourcitrus / PT. Gemilang Citrus Berjaya</p>
:ET