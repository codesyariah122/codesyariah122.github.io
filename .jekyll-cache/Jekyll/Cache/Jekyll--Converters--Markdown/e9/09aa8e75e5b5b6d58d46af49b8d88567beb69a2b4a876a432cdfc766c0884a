I"ËA<h3 id="parsing-data-json-upadte-data-covid19-dengan-php-curl">Parsing data JSON upadte data covid19 dengan PHP CURL</h3>

<p>Hai gaes, halo para coders, happy weekend. semoga sehat-sehat terus sampai week end kali ini. salam jumpa di artikel terbaru gout.<br />
kali ini gout mau membahas mengenai <code class="language-plaintext highlighter-rouge">pandemi</code> yang masih terus berlangsung, semoga cepat berakhir dan semoga tidak bertambah lagi suspek-suspek lainnya. Aamiin.</p>

<p><strong><em>parsing data JSON with CURL</em></strong>
apa itu curl ? 
<em>Curl</em> adalah sebuah program dan library untuk mengirim dan mengambil data melalui URL.</p>

<p>Curl adalah sebuah program:</p>

<p>Aritnya curl adalah sebuah program atau tools yang digunakan pada command line (CMD).</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl https://codesyariah122.github.io
</code></pre></div></div>
<p><strong><em>Curl adalah sebuah libarary:</em></strong></p>

<p>Artinya sekumpulan fungsi-fungsi curl yang dibungkus dalam paket libcurl dan bisa digunakan dalam berbagai macam bahasa pemrograman.</p>

<h2 id="curl-di-php">CURL di PHP</h2>
<p>dalam artikel ini gout hanya membahas penggunaan library curl di bahasa pemrograman PHP dan berbasi web. dalam studi kasusnya yaitu mengambil sebuah data dari informasi mengenai covid19 untuk wilayah indonesia, format data sumber adalah <code class="language-plaintext highlighter-rouge">JSON</code>.  mungkin tanpa berpanjang-panjang langsung ajah ke prakteknya.</p>

<p>dalam hal ini gout bikin direktori baru di root webserver <code class="language-plaintext highlighter-rouge">/var/www/html</code> gout buat direktori dengan nama <code class="language-plaintext highlighter-rouge">testAPI</code> di webserver <code class="language-plaintext highlighter-rouge">apache2</code>. kemudian buka direktori <code class="language-plaintext highlighter-rouge">testAPI</code> di code editor.</p>

<p>buat beberapa file , diantaranya adalah :</p>
<ol>
  <li>index.php (ini file utama nya)</li>
  <li>curl.php (file ini berisi fungsi untuk menjalankan fungsi curl di php)</li>
  <li>processProcess.php (file berfungsi untuk mengambil alih prosess dari ajax saat mengirim data dari input)</li>
  <li>script.js (file jquery yang akan melakukan pengiriman dan pengambilan data dari server)</li>
  <li>jquery.min.js ( bisa di download di link berikut : <a href="https://raw.githubusercontent.com/codesyariah122/Learn-WebDev/master/updateCovid19_Indonesia/jquery.min.js">jquery</a>)</li>
</ol>

<p>setelah menyiapkan semua file yang ada di daftar tersebut.</p>

<h3 id="file-curlphp">file curl.php</h3>
<p>buka file curl.php kemudian copy baris code berikut , isinya adalah fungsi untuk menjalankan curl di php :</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>  
<span class="k">function</span> <span class="n">curl</span><span class="p">(</span><span class="nv">$url</span><span class="p">){</span>
	<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
	<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
	<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>

	<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>

	<span class="k">return</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$result</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre></div></div>
<p>file <code class="language-plaintext highlighter-rouge">curl.php</code> ini mengembalikan json_decode yaitu menerjemahkan string data berformat JSON, <code class="language-plaintext highlighter-rouge">json_decode</code> ini adalah sebuah fungsi <code class="language-plaintext highlighter-rouge">php</code> untuk menterjemahkan string JSON agar bisa di assignment ke dalam suatu variable.</p>

<h3 id="file-indexphp">file index.php</h3>
<p>selanjutnya buka file index.php yang merupakan file utama di root direktori aplikasi kita, copykan code dibawah ini :</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="k">require_once</span> <span class="s1">'curl.php'</span><span class="p">;</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;title&gt;</span>Update Covid19 Indonesia<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
	<span class="nt">table</span><span class="p">{</span>
		<span class="nl">margin-top</span><span class="p">:</span> <span class="m">5rem</span><span class="p">;</span>
		<span class="nl">border-collapse</span><span class="p">:</span> <span class="nb">collapse</span><span class="p">;</span>
		<span class="nl">border</span><span class="p">:</span> <span class="m">0px</span> <span class="nb">solid</span> <span class="no">black</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="nt">th</span><span class="p">{</span>
		<span class="nl">background</span><span class="p">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.3</span><span class="p">);</span>
		<span class="nl">color</span><span class="p">:</span><span class="m">#f000ee</span><span class="p">;</span>
		<span class="nl">padding</span><span class="p">:</span> <span class="m">.8rem</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="nt">td</span><span class="p">{</span>
		<span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
		<span class="nl">color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
		<span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
		<span class="nl">padding</span><span class="p">:</span> <span class="m">.8rem</span><span class="p">;</span>
		<span class="nl">background</span><span class="p">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.7</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="nt">td</span><span class="nd">:hover</span><span class="p">{</span>
		<span class="nl">background</span><span class="p">:</span> <span class="no">coral</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="nt">select</span><span class="p">{</span>
		<span class="nl">margin-top</span><span class="p">:</span> <span class="m">.9rem</span><span class="p">;</span>
		<span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">-1.9rem</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span>  <span class="nv">$data</span> <span class="o">=</span> <span class="nf">curl</span><span class="p">(</span><span class="s1">'https://indonesia-covid-19.mathdro.id/api/provinsi/'</span><span class="p">)[</span><span class="s1">'data'</span><span class="p">];</span><span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="c1">//var_dump($data); die; ?&gt;</span>
<span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="nc">Update</span> <span class="nc">Covid</span> <span class="mi">19</span> <span class="nc">Indonesia</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">select</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="n">option</span><span class="o">&gt;-</span><span class="nc">Pilih</span> <span class="nc">Provinsi</span><span class="o">-&lt;/</span><span class="n">option</span><span class="o">&gt;</span>
<span class="o">&lt;?</span><span class="n">php</span>  <span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="k">do</span><span class="p">{</span> <span class="cp">?&gt;</span>	
	<span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?=</span><span class="nv">$i</span><span class="cp">?&gt;</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">&lt;?=</span><span class="nv">$data</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'provinsi'</span><span class="p">]</span><span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
<span class="cp">&lt;?php</span> <span class="nv">$i</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="nv">$i</span> <span class="o">&lt;=</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="cp">?&gt;</span>	
<span class="nt">&lt;/select&gt;</span>

	<span class="nt">&lt;table&gt;</span>
		<span class="nt">&lt;tr&gt;</span>
			<span class="nt">&lt;th&gt;</span>Provinsi<span class="nt">&lt;/th&gt;</span>
			<span class="nt">&lt;th&gt;</span>Terkonfirmasi Postif<span class="nt">&lt;/th&gt;</span>
			<span class="nt">&lt;th&gt;</span>Terkonfirmasi Sembuh<span class="nt">&lt;/th&gt;</span>
			<span class="nt">&lt;th&gt;</span>Terkonfirmasi Meninggal<span class="nt">&lt;/th&gt;</span>
		<span class="nt">&lt;/tr&gt;</span>
		<span class="nt">&lt;tr</span> <span class="na">id=</span><span class="s">"result"</span><span class="nt">&gt;</span>
			
		<span class="nt">&lt;/tr&gt;</span>
	<span class="nt">&lt;/table&gt;</span>

<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"script.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<p>file <code class="language-plaintext highlighter-rouge">index.php</code> ini berisi input berupa select, option untuk memilih provinsi yang akan di kirim ke server.</p>

<h3 id="file-scriptjs">file script.js</h3>
<p>kemudian selanjutnya, buka file script.js, yang akan menjalankan api ajax dengan jquery, copykan code berikut :</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	<span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">select</span><span class="dl">'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
		<span class="kd">let</span> <span class="nx">provinsi</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>

			<span class="k">if</span><span class="p">(</span><span class="nx">provinsi</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">-Pilih Provinsi-</span><span class="dl">"</span><span class="p">){</span>
				<span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Pilih provinsi terlebih dahulu</span><span class="dl">"</span><span class="p">);</span>
				<span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">select</span><span class="dl">'</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
			<span class="p">}</span><span class="k">else</span><span class="p">{</span>
				<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
					<span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">dataProcess.php?provinsi=</span><span class="dl">'</span><span class="o">+</span><span class="nx">provinsi</span><span class="p">,</span>
					<span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span>
					<span class="na">data</span><span class="p">:</span> <span class="dl">'</span><span class="s1">provinsi=</span><span class="dl">'</span><span class="o">+</span><span class="nx">provinsi</span><span class="p">,</span>
					<span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
						<span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
							<span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">select</span><span class="dl">'</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="dl">"</span><span class="s2">-Pilih Provinsi-</span><span class="dl">"</span><span class="p">);</span>
							<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
							<span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#result</span><span class="dl">'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
						<span class="p">}</span>
					<span class="p">}</span>
				<span class="p">})</span>
			<span class="p">}</span>
			
		<span class="p">})</span>
	<span class="p">})</span>
</code></pre></div></div>
<p>fungsi <code class="language-plaintext highlighter-rouge">$.ajax({})</code> ini akan melakukan pengiriman data dari input select yang di pilih dan click user kemudian mengirimkan informasi data (value) ke file <code class="language-plaintext highlighter-rouge">dataProcess.php</code></p>

<h3 id="file-dataprocessphp">file dataProcess.php</h3>
<p>buka file dataProcess.php, file ini yang akan menangkap informasi data yang dikirim oleh fungsi <code class="language-plaintext highlighter-rouge">$ajax({})</code> diatas, yang merupakan data(value) dari input yang di click atau dipilih oleh user.</p>

<p>setelah semua code sudah disalin, coba buka di browser <code class="language-plaintext highlighter-rouge">localhost/testAPI</code>, dan hasil akhirnya sepert ini</p>

<p><img src="{{site.url}}/assets/images/post/curl_php_covid19.gif" alt="CURL_PHP" /></p>

<p>akhirnya gout cukupkan sampai disini artikel ini, nanti mungkin di lanjut mengenai <code class="language-plaintext highlighter-rouge">CURL_PHP</code>, <code class="language-plaintext highlighter-rouge">JQUERY AJAX</code> , ok sekian dulu artikel kali ini, akhir kata gout ucapkan terima kasih, semoga coders semua selalu diberikan nikmat, sehat, dan nikmat waktu luang. jangan lupa jaga stabilitas kesehatan diri kita. ok sekian.</p>

<p>waasalammâ¦.</p>

<p><strong><em>puji ermanto</em></strong></p>

:ET