I"€?<h3 id="fitur-upload-gambar-dengan-metode-pdo-dan-jquery-ajax">Fitur upload gambar dengan metode PDO dan jquery-ajax</h3>
<p><img src="http://localhost:4000/assets/images/post/crud_ajax_pagination.gif" alt="upload_ajax" /></p>

<p>halo coders semuanya â€¦.<br />
ini masih melanjutkan edisi crud data dengan ajax jquery dengan menggunakan metode php pdo ekstension sebagai sql universal interfacenya.  dalam artikel kali ini gout mau menambahkan fitur pagination atau pengindeksan sebuah halaman/page, kedalam aplikasi crud data sederhana menggunakan metode pdo dan ajax-jquery yang sempat di bahas diartikel beberapa minggu yang lalu, masih hot-hot pop lah.</p>

<p><strong><em>menyambung dari artikel crud data ajax jquery, di artikel sebelumnya</em></strong></p>

<p><a href="https://codesyariah122.github.io/php/pdo/ajax/jquery/crud-data-dengan-jquery-ajax/" title="Crud data sederhana dengan ajax jquery">Crud data ajax jquery</a></p>

<p>dalam artikel sebelumnya tentang implementasi sebuah metode upload file.  sudah gout bahas beberapa hari yang lalu. dari fitur live search tersebut sudah gout push juga ke repository gout yaitu di link dibawah ini :<br />
<a href="https://github.com/codesyariah122/crud-data-with-php-PDO-Jquery-ajax/tree/with_upload" title="Crud data sederhana dengan ajax jquery">Crud data ajax jquery master</a></p>

<p>Dan kali ini dalam artikel terbaru ini gout mau mengimplementasikan fitur pagination atau pengindeksan tampilan atau view dalam penyajian data disuatu halaman.<br />
pagination ini merupakan fitur yang sangat membantu dalam pengolahan sebuah data yang akan disajikan. sehingga tampilan data tidak berantai sampai ke baris bawah. terutama jika data yang ingin diquery itu berisi ratusan atau ribuan data, kebayang dong harus scroll halaman berapa kali.</p>

<p>ok tanpa berpanjang-panjang dalam mukodimah di artikel kali ini, kita langsung ajah ke inti permasalahannya. sebelum coding dimulai, kita sedikit flashback ke artikel sebelumnya dimana gout menambahkan fitur untuk upload image.<br />
diartikel membuat pagination ini struktur file masih sama, hanya struktur coding atau penulisan codenya yang mengalami perombakan , diantaranya beberapa coding yang gout rubah :</p>
<ul>
  <li>file <code class="language-plaintext highlighter-rouge">contents/view.php</code></li>
</ul>

<p>difile ini gout merubah struktur coding menjadi seperti ini :</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
  <span class="nc">.loader</span><span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">4.3rem</span><span class="p">;</span>
    <span class="nl">margin-left</span><span class="p">:</span> <span class="m">12rem</span><span class="p">;</span>
    <span class="nl">z-index</span><span class="p">:</span> <span class="m">-1</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"text-primary text-center mt-4 pt-4"</span><span class="nt">&gt;</span>Product Table<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row mt-3 mb-3 mx-auto"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-xs-12"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">name=</span><span class="s">"keyword"</span> <span class="na">id=</span><span class="s">"keyword"</span> <span class="na">placeholder=</span><span class="s">"Type keyword ... "</span> <span class="na">autocomplete=</span><span class="s">"off"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"assets/img/animated.gif"</span> <span class="na">class=</span><span class="s">"loader"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"paging"</span><span class="nt">&gt;&lt;/div&gt;</span>


<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"modal-detail"</span><span class="nt">&gt;&lt;/div&gt;</span>  

<span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"table table-hover"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;thead&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>Product Code<span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>Product Name<span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"col"</span><span class="nt">&gt;</span>Operation Table<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/thead&gt;</span>
  <span class="nt">&lt;tbody</span> <span class="na">id=</span><span class="s">"product-data"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/tbody&gt;</span>
<span class="nt">&lt;/table&gt;</span>


<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#product-data</span><span class="dl">'</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="dl">'</span><span class="s1">contents/product_data.php</span><span class="dl">'</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#modal-detail</span><span class="dl">'</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="dl">'</span><span class="s1">contents/modal.php</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#paging</span><span class="dl">'</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="dl">'</span><span class="s1">contents/paging.php</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#keyword</span><span class="dl">'</span><span class="p">).</span><span class="nx">trigger</span><span class="p">(</span><span class="dl">'</span><span class="s1">focus</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>

</code></pre></div></div>

<p>terlihat struktur codingnya berbeda dari artikel sebelumnya, dan tampilan di view ini juga sebagai sumber DOM html datanya. <strong><em>selanjutnya â€¦</em></strong></p>

<ul>
  <li>file <code class="language-plaintext highlighter-rouge">assets/MyJs.js</code>
<a href="https://github.com/codesyariah122/crud-data-with-php-PDO-Jquery-ajax/blob/with_upload/assets/MyJs.js" title="File MyJs.js">Crud data ajax jquery</a></li>
</ul>

<p>Di link diatas adalah file <code class="language-plaintext highlighter-rouge">MyJs.js</code> dari artikel sebelumnya. difile tersebut juga mengalami perubahan yakni di bagian untuk searchData dan satu tambahan yaitu untuk dom paginationnya, berikut perubahan dari file <code class="language-plaintext highlighter-rouge">MyJs.js</code> dari link diatas :</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#viewdata</span><span class="dl">'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">keyup</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">#keyword</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.loader</span><span class="dl">'</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">keyword</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#keyword</span><span class="dl">'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>

  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">contents/product_data.php?page=</span><span class="dl">'</span><span class="o">+</span><span class="nx">keyword</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="dl">'</span><span class="s1">keyword=</span><span class="dl">'</span><span class="o">+</span><span class="nx">keyword</span><span class="p">,</span>
    <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
        <span class="c1">//alert(response);</span>
        <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.loader</span><span class="dl">'</span><span class="p">).</span><span class="nx">hide</span><span class="p">().</span><span class="nx">slideUp</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#product-data</span><span class="dl">'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">Swal</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="dl">'</span><span class="s1">Product data no found</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>

<span class="p">});</span>


<span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#viewdata</span><span class="dl">'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">.page-link</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">const</span> <span class="nx">pageNum</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="dl">'</span><span class="s1">num</span><span class="dl">'</span><span class="p">);</span>

  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">contents/product_data.php?page=</span><span class="dl">'</span><span class="o">+</span><span class="nx">pageNum</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="dl">'</span><span class="s1">pageNum=</span><span class="dl">'</span><span class="o">+</span><span class="nx">pageNum</span><span class="p">,</span>
    <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
        <span class="c1">//alert(response);</span>
        <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#product-data</span><span class="dl">'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>

</code></pre></div></div>
<p>dua bagian itu saja yang mengalami perubahan, selebihnya masih sama dari artikel awal tentang crud ajax jquery.</p>

<p>selanjutnya di file root kita <code class="language-plaintext highlighter-rouge">functions.php</code> ada sedikit penambahan di fungsi <code class="language-plaintext highlighter-rouge">searchData(){}</code> seperti ini perubahan di bagian fungsi <code class="language-plaintext highlighter-rouge">searchData(){}</code> tersebut :</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="nf">searchData</span><span class="p">(</span><span class="nv">$keyword</span><span class="p">,</span> <span class="nv">$limitStart</span><span class="p">,</span> <span class="nv">$limit</span><span class="p">){</span>
  <span class="nv">$query</span> <span class="o">=</span> <span class="s2">"SELECT * FROM `product` WHERE 
        `product_code` LIKE '%</span><span class="nv">$keyword</span><span class="s2">' OR
        `product_name` LIKE '%</span><span class="nv">$keyword</span><span class="s2">%' OR 
        `product_price` LIKE '%</span><span class="nv">$keyword</span><span class="s2">%' 
        ORDER BY `id` DESC
        LIMIT </span><span class="nv">$limitStart</span><span class="s2">, </span><span class="nv">$limit</span><span class="s2">"</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>dibagian tersebut terlihat berbeda dari code di artikel sebelumnya, kali ini fungsi tersebut ane tambahkan command sql <code class="language-plaintext highlighter-rouge">sql LIMIT</code> fungsi limit ini lah yang digunakan dalam membuat fitur pagination dengan <code class="language-plaintext highlighter-rouge">LIMIT</code> data yang akan disajikan akan di batasi sesuai dengan option yang disesuaikan. sehingga di file selanjutnya yaitu file utama untuk domHTML data di file <code class="language-plaintext highlighter-rouge">product_data.php</code></p>
:ET