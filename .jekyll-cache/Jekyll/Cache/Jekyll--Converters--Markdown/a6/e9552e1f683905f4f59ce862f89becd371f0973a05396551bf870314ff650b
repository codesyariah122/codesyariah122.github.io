I"§)<h3 id="fitur-pagination-dalam-crud-data-with-ajax-jquery">Fitur pagination dalam crud data with ajax jquery</h3>
<p>halo coders semuanya â€¦.<br />
ini masih melanjutkan edisi crud data dengan ajax jquery dengan menggunakan metode php pdo ekstension sebagai sql universal interfacenya.  dalam artikel kali ini gout mau menambahkan fitur pagination atau pengindeksan sebuah halaman/page, kedalam aplikasi crud data sederhana menggunakan metode pdo dan ajax-jquery yang sempat di bahas diartikel beberapa minggu yang lalu, masih hot-hot pop lah.</p>

<p><strong><em>menyambung dari artikel crud data ajax jquery, di artikel sebelumnya</em></strong></p>

<p><a href="https://codesyariah122.github.io/php/pdo/ajax/jquery/crud-data-dengan-jquery-ajax/" title="Crud data sederhana dengan ajax jquery">Crud data ajax jquery</a></p>

<p>dalam artikel sebelumnya tentang implementasi sebuah metode upload file.  sudah gout bahas beberapa hari yang lalu. dari fitur upload tersebut sudah gout push juga ke repository gout yaitu di link dibawah ini :<br />
<a href="https://github.com/codesyariah122/crud-data-with-php-PDO-Jquery-ajax/tree/with_upload" title="Crud data sederhana dengan ajax jquery">Crud data ajax jquery master</a></p>

<p>Dan kali ini dalam artikel terbaru ini gout mau mengimplementasikan fitur pagination atau pengindeksan tampilan atau view dalam penyajian data disuatu halaman.<br />
pagination ini merupakan fitur yang sangat membantu dalam pengolahan sebuah data yang akan disajikan. sehingga tampilan data tidak berantai sampai ke baris bawah. terutama jika data yang ingin diquery itu berisi ratusan atau ribuan data, kebayang dong harus scroll halaman berapa kali.</p>

<p>ok tanpa berpanjang-panjang dalam mukoddimah di artikel kali ini, kita langsung ajah ke inti permasalahannya. sebelum coding dimulai, kita sedikit flashback ke artikel sebelumnya dimana gout menambahkan fitur untuk upload image.<br />
diartikel membuat pagination ini struktur file masih sama, hanya struktur coding atau penulisan codenya yang mengalami perombakan , diantaranya beberapa coding yang gout rubah :</p>
<ul>
  <li>file <code class="language-plaintext highlighter-rouge">contents/view.php</code></li>
</ul>

<p>difile ini gout merubah struktur coding menjadi seperti ini :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;style type="text/css"&gt;
  .loader{
    width: 150px;
    position: absolute;
    top: 4.3rem;
    margin-left: 12rem;
    z-index: -1;
    display: none;
  }
&lt;/style&gt;
&lt;h1 class="text-primary text-center mt-4 pt-4"&gt;Product Table&lt;/h1&gt;

&lt;div class="row mt-3 mb-3 mx-auto"&gt;
  &lt;div class="col-xs-12"&gt;
      &lt;input type="text" class="form-control" name="keyword" id="keyword" placeholder="Type keyword ... " autocomplete="off"&gt;
      &lt;img src="assets/img/animated.gif" class="loader"&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div id="paging"&gt;&lt;/div&gt;


&lt;div id="modal-detail"&gt;&lt;/div&gt;  

&lt;table class="table table-hover"&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th scope="col"&gt;Product Code&lt;/th&gt;
      &lt;th scope="col"&gt;Product Name&lt;/th&gt;
      &lt;th scope="col"&gt;Operation Table&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody id="product-data"&gt;
  &lt;/tbody&gt;
&lt;/table&gt;


&lt;script type="text/javascript"&gt;
  $(document).ready(function(){
      $('#product-data').load('contents/product_data.php').fadeIn(1000);
      $('#modal-detail').load('contents/modal.php');
      $('#paging').load('contents/paging.php');
      $('#keyword').trigger('focus')
  });
&lt;/script&gt;

</code></pre></div></div>

<p>terlihat struktur codingnya berbeda dari artikel sebelumnya, dan tampilan di view ini juga sebagai sumber DOM html datanya. <strong><em>selanjutnya â€¦</em></strong></p>

<ul>
  <li>file <code class="language-plaintext highlighter-rouge">assets/MyJs.js</code>
<a href="https://github.com/codesyariah122/crud-data-with-php-PDO-Jquery-ajax/blob/with_upload/assets/MyJs.js" title="File MyJs.js">Crud data ajax jquery</a></li>
</ul>

<p>Di link diatas adalah file <code class="language-plaintext highlighter-rouge">MyJs.js</code> dari artikel sebelumnya. difile tersebut juga mengalami perubahan yakni di bagian untuk searchData dan satu tambahan yaitu untuk dom paginationnya, berikut perubahan dari file <code class="language-plaintext highlighter-rouge">MyJs.js</code> dari link diatas :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$('#viewdata').on('keyup', '#keyword', function(){
  $('.loader').show();
  const keyword = $('#keyword').val();

  $.ajax({
    url: 'contents/product_data.php?page='+keyword,
    type: 'post',
    data: 'keyword='+keyword,
    success: function(response){
      if(response){
        //alert(response);
        $('.loader').hide().slideUp(1000);
        $('#product-data').html(response);
      }else{
        Swal.fire('Product data no found');
      }
    }
  });

});


$('#viewdata').on('click', '.page-link', function(){
  const pageNum = $(this).data('num');

  $.ajax({
    url: 'contents/product_data.php?page='+pageNum,
    type: 'post',
    data: 'pageNum='+pageNum,
    success: function(response){
      if(response){
        //alert(response);
        $('#product-data').html(response);
      }
    }
  });
});

</code></pre></div></div>
<p>dua bagian itu saja yang mengalami perubahan, selebihnya masih sama dari artikel awal tentang crud ajax jquery.</p>

<p>selanjutnya di file root kita <code class="language-plaintext highlighter-rouge">functions.php</code> ada sedikit penambahan di fungsi <code class="language-plaintext highlighter-rouge">searchData(){}</code> seperti ini perubahan di bagian fungsi <code class="language-plaintext highlighter-rouge">searchData(){}</code> tersebut :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function searchData($keyword, $limitStart, $limit){
  $query = "SELECT * FROM `product` WHERE 
        `product_code` LIKE '%$keyword' OR
        `product_name` LIKE '%$keyword%' OR 
        `product_price` LIKE '%$keyword%' 
        ORDER BY `id` DESC
        LIMIT $limitStart, $limit"; // ini dibutuhkan untuk membatasi data yang akan di select

  return view($query);
}
</code></pre></div></div>

<p>dibagian tersebut terlihat berbeda dari code di artikel sebelumnya, kali ini fungsi tersebut ane tambahkan command sql <code class="language-plaintext highlighter-rouge">sql LIMIT</code> fungsi limit ini lah yang digunakan dalam membuat fitur pagination dengan <code class="language-plaintext highlighter-rouge">LIMIT</code> data yang akan disajikan akan di batasi sesuai dengan option yang disesuaikan. sehingga di file selanjutnya yaitu file utama untuk domHTML data yakni di file <code class="language-plaintext highlighter-rouge">product_data.php</code> , mengalami perubahan menjadi seperti berikut :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
require_once '../functions.php';
  //echo "?page=".@$_GET['page'];
$limit = 3;
$jmlData = count(view("SELECT * FROM `product`"));
$jmlHalaman = ceil($jmlData / $limit);
$aktifPage = ((int)@$_GET['page']) ? @$_GET['page'] : 1;
$limitStart = ($aktifPage - 1)*$limit;
//validasi parameter dari url
switch(@$_GET['page']):
  case @$_POST['keyword']:
  $keyword = @$_POST['keyword'];
  $viewData = searchData($keyword, $limitStart, $limit);
  break;
  default:
  $viewData = view("SELECT * FROM `product` ORDER BY `id` DESC LIMIT $limitStart, $limit");
endswitch;
?&gt;


&lt;?php if(empty($viewData)): ?&gt;
  &lt;tr&gt;
    &lt;td colspan="5" style="color:red; font-weight: bold; text-align:center;"&gt;No data on this table product&lt;/td&gt;
  &lt;/tr&gt;
&lt;?php endif; ?&gt;


 &lt;?php foreach($viewData as $view): ?&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;?=$view['product_code']?&gt;&lt;/td&gt;
      &lt;td&gt;&lt;?=$view['product_name']?&gt;&lt;/td&gt;
      &lt;td&gt;
        &lt;button id="&lt;?=$view['id']?&gt;" class="edit btn btn-danger btn-sm"&gt;&lt;i class='fas fa-edit'&gt;&lt;/i&gt;&lt;/button&gt;
        &lt;button id="&lt;?=$view['id']?&gt;" class="del btn btn-info btn-sm"&gt;&lt;i class='fas fa-eraser'&gt;&lt;/i&gt;&lt;/button&gt;
        &lt;button data-id="&lt;?=$view['id']?&gt;" class="detail btn btn-success btn-sm" data-toggle="modal" data-target="#detailData" data-code="&lt;?=$view['product_code']?&gt;"&gt;&lt;i class="fas fa-fw fa-binoculars"&gt;&lt;/i&gt;&lt;/button&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
&lt;?php endforeach; ?&gt;

</code></pre></div></div>

<p>dari file diatas terlihat perubahan struktur coding dari mulai menambahkan untuk parameter <code class="language-plaintext highlighter-rouge">[LIMITSTART,LIMIT]</code> di fungsi <code class="language-plaintext highlighter-rouge">searchData(){}</code> sehingga hasil dari codingan tersebut merubah tampilan view cruddata ajax kita menjadi seperti berikut :</p>

<p><img src="{{site.url}}/assets/images/post/crud_ajax_pagination.gif" alt="pagination_ajax" /></p>

<p>untuk tambahan file lainnya yaitu di file <code class="language-plaintext highlighter-rouge">modal.php</code> karena di file <code class="language-plaintext highlighter-rouge">product_data.php</code> sebelumnya tag html untuk modal berada difile <code class="language-plaintext highlighter-rouge">product_data.php</code> tersebut, dan di artikel kali ini dalam membuat fitur pagination gout pindahkan kesatu file baru yang gout beri nama file <code class="language-plaintext highlighter-rouge">contents/modal.php</code> , dan satu lagi satu tambahan file baru yaitu file <code class="language-plaintext highlighter-rouge">contents/paging.php</code> file ini adalah tag html untuk controll paginationnya, menggunakan css bootstrap 4.5. 
untuk 2 file tambahan tersebut dapat dilihat direpo yang sudah gout push ke github, silahkan meluncuk di link di bawah ini : 
<a href="https://github.com/codesyariah122/crud-data-with-php-PDO-Jquery-ajax/tree/with_pagination/contents" title="2 file tambahan : paging.php dan modal.php">Crud data ajax jquery</a></p>

<p>sekian dulu ane akhiri artikel kali ini <strong><em>Membuat fitur pagination di aplikasi crud data ajax jquery</em></strong>, mudah2an dapat dimengerti jikalau ada pertanyaan silahkan memberikan pertanyaan di kolom komentar dibawah. tapi harus pakai akun disqus, yah bikin dulu akun di disqus lah, gak mahal dan gak susah ko. hehehe
ok sekian dulu</p>

<p>waasalammâ€¦.</p>

<p><strong><em>puji ermanto</em></strong></p>

:ET